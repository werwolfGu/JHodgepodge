### 分布式CAP理论
    C(Consistency):即更新数据返回客户端后，之后所以节点读取的数据都是更新后的数据；
    A(Availability):即服务一直可用，而且在正常时间响应；
    P(Partition Tolerance)：即分布式系统在遇到某节点或网络分区故障的时候，仍然能够对外提供满足一致性和可用性的服务。


## 在此ZooKeeper保证的是CP

- 分析：可用性（A:Available）

**不能保证每次服务请求的可用性** 任何时刻对ZooKeeper的访问请求能得到一致的数据结果，同时系统对网络分割具备容错性；但是它不能保证每次服务请求的可用性（注：也就是在极端环境下，ZooKeeper可能会丢弃一些请求，消费者程序需要重新请求才能获得结果）。所以说，ZooKeeper不能保证服务可用性。

**进行leader选举时集群都是不可用** 在使用ZooKeeper获取服务列表时，当master节点因为网络故障与其他节点失去联系时，剩余节点会重新进行leader选举。问题在于，选举leader的时间太长，30 ~ 120s, 且选举期间整个zk集群都是不可用的，这就导致在选举期间注册服务瘫痪，虽然服务能够最终恢复，但是漫长的选举时间导致的注册长期不可用是不能容忍的。所以说，ZooKeeper不能保证服务可用性。

>对比极端情况下 某台zk跟其他机器断开了链接 ，client请求到断开连接的zk机器，此时到达这些机器的请求会被丢弃；