# redis过期策略

- 通常过期策略有三种
    - 定时过期
        
        每个设置过期时间的key都设置一个定时器，到过期时间立即清除；
        - 好处：对内存友好，
        - 坏处：占用大量内存；
    - 惰性过期
    
        只有当访问一个key时，才会判断该key是否过期，过期清除；
        - 好处：对CPU友好；
        - 坏处：对内存不友好；
        
    - 定期过期
        
        每隔一段时间，会定期扫描一定数量的数据库 expire字典中一定数量的key，并清除掉过期key；通过调整定时
        扫描时间间隔和每次扫描的限定耗时，可以在不同情况下使得CPU和内存达到最优的平衡效果；

> redis 使用了惰性过期和定期过期；

# redis淘汰策略

Redis的内存淘汰策略是指在Redis的用于缓存的内存不足时，怎么处理需要新写入且需要申请额外空间的数据。

- noeviction：当内存不足以容纳新写入数据时，新写入操作会报错。
- allkeys-lru：当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的key。
- allkeys-random：当内存不足以容纳新写入数据时，在键空间中，随机移除某个key。
- volatile-lru：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，移除最近最少使用的key。
- volatile-random：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，随机移除某个key。
- volatile-ttl：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，有更早过期时间的key优先移除。
